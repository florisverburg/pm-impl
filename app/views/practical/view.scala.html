@(practical: Practical)
@sessionUser = @{Secure.getUser()}

@main("Practical", "practicals") {

<div class="main-text jumbotron">
    <h2>@practical.getName()</h2>
    <p>
        @practical.getDescription()
    </p>
</div>
<h2>Currently enrolled participants:</h2>
<ul>
    @practical.getUsers().map { user =>
        <li>@user.getFullName()</li>
    }
</ul>
<h2>Your practical group @PracticalGroup.findWithPracticalAndUser(practical, sessionUser).getId()</h2>
<h3>Owner: @PracticalGroup.findWithPracticalAndUser(practical, sessionUser).getOwner.getFullName()</h3>
@PracticalGroup.findWithPracticalAndUser(practical, sessionUser).getGroupMembers().map { user =>
    <div class="row">
        <div class="col-xs-4">
            <p>@user.getFullName()</p>
        </div>
        <div class="col-xs-8">
        </div>
    </div>
    }

<h2> Your sent invites</h2>
<div class="row">
    <div class="col-xs-3">
        Sender:
    </div>
    <div class="col-xs-3">
        Receiver:
    </div>
    <div class="col-xs-3">
        State:
    </div>
    <div class="col-xs-3">

    </div>
</div>
@practical.getInvites().map { invite =>
    @if(invite.getSender().getId().equals(sessionUser.getId()) && invite.getState().equals(Invite.State.Pending)) {
        <div class="row">
            <div class="col-xs-3">
                <p>@invite.getSender().getFullName()</p>
            </div>
            <div class="col-xs-3">
                <p>@invite.getReceiver().getFullName()</p>
            </div>
            <div class="col-xs-3">
                <p>@invite.getState()</p>
            </div>
            <div class="col-xs-3">
                <a href="@routes.InviteController.view(invite.getId())" class="btn btn-primary">view invite</a>
            </div>
        </div>
    }
}
<h2> Your received invites</h2>
<div class="row">
    <div class="col-xs-3">
        Sender:
    </div>
    <div class="col-xs-3">
        Receiver:
    </div>
    <div class="col-xs-3">
        State:
    </div>
    <div class="col-xs-3">

    </div>
</div>
@practical.getInvites().map { invite =>
    @if(invite.getReceiver().getId().equals(sessionUser.getId()) && invite.getState().equals(Invite.State.Pending)) {
        <div class="row">
            <div class="col-xs-3">
                <p>@invite.getSender().getFullName()</p>
            </div>
            <div class="col-xs-3">
                <p>@invite.getReceiver().getFullName()</p>
            </div>
            <div class="col-xs-3">
                <p>@invite.getState()</p>
            </div>
            <div class="col-xs-3">
                <a href="@routes.InviteController.view(invite.getId())" class="btn btn-primary">view invite</a>
            </div>
        </div>
    }
}
<h2>Practical Groups:</h2>
@practical.getPracticalGroups().map { practicalGroup =>
    @if(practicalGroup.getGroupMembers.get(0).getId().equals(sessionUser.getId())) {
    } else {
    <div class="row">
        <div class="col-xs-4">
            <a href="@routes.PracticalController.viewPracticalGroup(practicalGroup.getId())">Practical group #@practicalGroup.getId()</a>
        </div>
        <div class="col-xs-8">
        @if(PracticalGroup.findWithPracticalAndUser(practical, sessionUser).getOwner().equals(sessionUser)) {
            <a href="@routes.PracticalController.sendInvitePracticalGroup(practicalGroup.getId())" class="btn btn-primary">Invite</a>
            }
        </div>
    </div>
    }
}
<h2>Accepted and Rejected invites</h2>
@sessionUser.getInvitesReceived().map { invite =>
    @if(!invite.getState().equals(Invite.State.Pending)) {
        <div class="row">
            <div class="col-xs-3">
                <p>@invite.getSender().getFullName()</p>
            </div>
            <div class="col-xs-3">
                <p>@invite.getReceiver().getFullName()</p>
            </div>
            <div class="col-xs-3">
                <p>@invite.getState()</p>
            </div>
            <div class="col-xs-3">
                <a href="@routes.InviteController.view(invite.getId())" class="btn btn-primary">view invite</a>
            </div>
        </div>
    }
}
@sessionUser.getInvitesSend().map { invite =>
    @if(!invite.getState().equals(Invite.State.Pending)) {
    <div class="row">
        <div class="col-xs-3">
            <p>@invite.getSender().getFullName()</p>
        </div>
        <div class="col-xs-3">
            <p>@invite.getReceiver().getFullName()</p>
        </div>
        <div class="col-xs-3">
            <p>@invite.getState()</p>
        </div>
        <div class="col-xs-3">
            <a href="@routes.InviteController.view(invite.getId())" class="btn btn-primary">view invite</a>
        </div>
    </div>
    }
}
}
